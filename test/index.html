<html>

<head>
    <title>StrCSS Demo</title>
    <style>
        #t1,
        #t2,
        #t3 {
            position: fixed;
            top: 0px;
            left: 0px;
            height: 100vh;
            border: 0px;
            padding: 25px;
            margin: 0px;
            box-sizing: border-box;
            outline: none;
            font-family: monospace;
            font-size: 12px;
            line-height: 12px;
            overflow: hidden;
        }

        #t1 {
            z-index: 2;
            background: #272822;
            color: white;
            width: 40vw;
        }

        #t3 {
            z-index: 3;
            background: transparent;
            pointer-events: none;
            width: 40vw;
        }

        #t2 {
            left: auto;
            right: 0px;
            width: 60vw;
        }
    </style>
</head>

<body>
    <textarea id='t1'>
# StrCSS Demo
# download from NPM:
#  https://www.npmjs.com/package/strcss

var base public_html/resources

font sfpro bold {base}/fonts/sfpro.otf
font arial {base}/fonts/arial.otf
font Lato

map container
    position fixed
    rect stretch
    gradient 90 red blue
    font sfpro

map window
    size 100%
    maxSize 300 200
    padding 20
on  closed
    display none

map title
map text
    color #333

map title
    fontSize 20
    fontWeight 300

map profilePicture
    align center
    image {base}/login.png
    cursor pointer
at  mobile
    size 10
at  tablet
    size 100
at  desktop
    size 200
at  iphonex
    marginTop 100

map button
    cursor pointer
on  hover
    scale 1.1
        </textarea>
    <pre><code class="css" id='t2'></code></pre>
    <pre><code class="perl" id='t3'></code></pre>
</body>
<link rel="stylesheet" href="highlight/highlight.css">
<script>
    // Fake Node Env
    window.exports = {}
    window.require = module => { return { constants: {}, uniques: [] } }
</script>
<script src="../library/Sheet.js"></script>
<script src="highlight/highlight.js"></script>
<script>
    let sheet = new Sheet('')
    let t1 = document.getElementById('t1')
    let t2 = document.getElementById('t2')
    let t3 = document.getElementById('t3')

    parseT1 = _ => {
        sheet.sheetText = t1.value
        sheet.sheetRules = t1.value.split('\n')
        sheet.css = ''
        sheet.map = []
        sheet.generateCSS()
        t2.innerHTML = sheet.css
        t3.innerHTML = t1.value
        hljs.initHighlighting.called = false;
        hljs.initHighlighting();
    }

    t1.addEventListener('keydown', e => {
        if (e.keyCode === 9) {
            e.preventDefault();
            t1.value += '    '
        }
    })

    t1.addEventListener('input', e => {
        parseT1()
    })

    t1.focus()
    parseT1()
</script>

</html>